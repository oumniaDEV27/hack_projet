<ion-header>
  <ion-toolbar>
    <ion-title>Mes Selfies</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/map">CARTE</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
<ion-button expand="block" routerLink="/camera">PRENDRE UNE PHOTO</ion-button>


  <ion-list>
    <ion-item *ngFor="let p of photoService.photos; let i = index">
      <ion-thumbnail slot="start" *ngIf="p.webviewPath" (click)="openPreview(p)">
        <img [src]="p.webviewPath" />
      </ion-thumbnail>

      <ion-label>
        <h2>{{ p.takenAt | date:'short' }}</h2>
        <p *ngIf="p.coords">({{ p.coords.lat | number:'1.5-5' }}, {{ p.coords.lng | number:'1.5-5' }})</p>
      </ion-label>

      <ion-button fill="clear" (click)="goToMap(i)">VOIR SUR LA CARTE</ion-button>
      <ion-button fill="clear" color="danger" (click)="confirmDelete(i)">SUPPRIMER</ion-button>
      <ion-toggle [checked]="p.liked" (ionChange)="toggleLike(i)">LIKE</ion-toggle>
    </ion-item>
  </ion-list>


  <ion-modal [isOpen]="previewOpen" (didDismiss)="closePreview()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Pr√©visualisation</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closePreview()">Fermer</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <div class="preview-wrap" *ngIf="selectedPhoto">
          <img [src]="selectedPhoto.webviewPath" />
          <div class="meta">{{ selectedPhoto.takenAt | date:'short' }}</div>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>